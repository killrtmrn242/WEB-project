<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-STORE | Products</title>
    <link href="./styles.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>

<body class="light-theme"> <!-- Начальная тема: светлая -->

    <header class="p-3 mb-3 border-bottom">
        <div class="container">
            <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
                <a href="./index.html"
                    class="d-flex align-items-center mb-2 mb-lg-0 text-decoration-none me-5">
                    <img src="./assets/icon.svg" width="40" height="32" role="img" aria-label="Bootstrap" />
                </a>

                <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
                    <li><a href="./home.html" class="nav-link px-2" tabindex="0">Home</a></li>
                    <li><a href="./products.html" class="nav-link px-2" tabindex="0">Products</a></li>
                    <li><a href="./about.html" class="nav-link px-2" tabindex="0">About us</a></li>
                    <li><a href="./contact.html" id="openForm" class="nav-link px-2" tabindex="0">Contact Us</a></li>
                    <li><a href="./faq.html" class="nav-link px-2" tabindex="0">FAQ</a></li>
                </ul>
                <button id="themeToggleBtn" class="btn btn-secondary ms-2">Toggle Day/Night Theme</button>
                <audio id="dayNight" src="assets/day_night.mp3" ></audio>
            </div>
        </div>
    </header>

    <div class="container">
        <h1 class="d-flex align-item-center justify-content-center mt-5">Our products</h1>
        <p class="d-flex align-item-center justify-content-center mt-2 mb-5">Products you can buy from us</p>

        <div class="row shop">
            <div class="col-3">
                <h3 class="mb-3">Your cart</h3>
                <div class="cart_list" id="cartList">
                    <!-- Cart items will be dynamically added here -->
                </div>
                <h3 class="cart_list mt-5" id="cartTotal">
                    Cost of cart: 0 ₪
                </h3>
                <div class="p">Continue shopping: <button type="button" class="btn btn-primary">BUY</button></div>
            </div>
            <div class="col">
                <div class="filter mb-4">
                    <label for="categorySelect">Filter by Category:</label>
                    <select id="categorySelect" class="form-select" aria-label="Filter by Category">
                        <option value="all">All</option>
                        <option value="cars">Cars</option>
                        <option value="laptops">Laptops</option>
                        <option value="phones">Phones</option>
                        <option value="tv">Televisions</option>
                        <option value="gaming">Gaming Consoles</option>
                        <option value="accessories">Accessories</option>
                    </select>

                    <label for="priceSelect" class="mt-2">Filter by Price:</label>
                    <select id="priceSelect" class="form-select" aria-label="Filter by Price">
                        <option value="all">All</option>
                        <option value="under1000">Under 1000 ₪</option>
                        <option value="under1500">Under 1500 ₪</option>
                        <option value="1500to3000">1500 ₪ - 3000 ₪</option>
                        <option value="over3000">Over 3000 ₪</option>
                    </select>
                </div>

                <h3 class="mb-3">Products list</h3>
                <div class="list" id="items">
                    <div class="card" data-category="cars" data-price="1500">
                        <img src="./assets/BMW M5.jpg" class="card-img-top" alt="...">
                        <div class="card-body">
                            <h5 class="card-title">BMW M5 F90</h5>
                            <p class="card-text">Price: 1500 ₪</p>
                            <button class="btn btn-primary add-to-cart">To Cart</button>
                        </div>
                    </div>
                    <div class="card" data-category="laptops" data-price="1500">
                        <img src="./assets/gigabyte_laptop.jpg" class="card-img-top" alt="...">
                        <div class="card-body">
                            <h5 class="card-title">Gigabyte Laptop</h5>
                            <p class="card-text">Price: 1500 ₪</p>
                            <button class="btn btn-primary add-to-cart">To Cart</button>
                        </div>
                    </div>
                    <div class="card" data-category="phones" data-price="3500">
                        <img src="./assets/iphone_14.jpeg" class="card-img-top" alt="iPhone">
                        <div class="card-body">
                            <h5 class="card-title">iPhone 14</h5>
                            <p class="card-text">Price: 3500 ₪</p>
                            <button class="btn btn-primary add-to-cart">To Cart</button>
                        </div>
                    </div>
                    <div class="card" data-category="tv" data-price="2500">
                        <img src="./assets/samsung_smartTV.jpeg" class="card-img-top" alt="Samsung TV">
                        <div class="card-body">
                            <h5 class="card-title">Samsung 55" Smart TV</h5>
                            <p class="card-text">Price: 2500 ₪</p>
                            <button class="btn btn-primary add-to-cart">To Cart</button>
                        </div>
                    </div>
                    <div class="card" data-category="gaming" data-price="2000">
                        <img src="./assets/xbox_X.jpeg" class="card-img-top" alt="Xbox">
                        <div class="card-body">
                            <h5 class="card-title">Xbox Series X</h5>
                            <p class="card-text">Price: 2000 ₪</p>
                            <button class="btn btn-primary add-to-cart">To Cart</button>
                        </div>
                    </div>
                    <div class="card" data-category="accessories" data-price="1000">
                        <img src="./assets/airpods_pro.jpeg" class="card-img-top" alt="AirPods">
                        <div class="card-body">
                            <h5 class="card-title">Apple AirPods Pro</h5>
                            <p class="card-text">Price: 1000 ₪</p>
                            <button class="btn btn-primary add-to-cart">To Cart</button>
                        </div>
                    </div>
                    <div class="card" data-category="gaming" data-price="3000">
                        <img src="./assets/ps5.jpeg" class="card-img-top" alt="PlayStation">
                        <div class="card-body">
                            <h5 class="card-title">PlayStation 5</h5>
                            <p class="card-text">Price: 3000 ₪</p>
                            <button class="btn btn-primary add-to-cart">To Cart</button>
                        </div>
                    </div>
                    <div class="card" data-category="accessories" data-price="800">
                        <img src="./assets/galaxy_watch4.jpeg" class="card-img-top" alt="Smartwatch">
                        <div class="card-body">
                            <h5 class="card-title">Samsung Galaxy Watch 4</h5>
                            <p class="card-text">Price: 800 ₪</p>
                            <button class="btn btn-primary add-to-cart">To Cart</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>



    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const categorySelect = document.getElementById('categorySelect');
            const priceSelect = document.getElementById('priceSelect');
            const items = document.getElementById('items').children;
            const cartList = document.getElementById('cartList');
            const cartTotal = document.getElementById('cartTotal');
            let totalCost = 0;
    
            // Load stored filter settings from local storage
            const storedCategory = localStorage.getItem('selectedCategory');
            const storedPrice = localStorage.getItem('selectedPrice');
    
            if (storedCategory) {
                categorySelect.value = storedCategory;
            }
            if (storedPrice) {
                priceSelect.value = storedPrice;
            }
    
            function filterProducts() {
                const selectedCategory = categorySelect.value;
                const selectedPrice = priceSelect.value;
    
                // Store the selected values in local storage
                localStorage.setItem('selectedCategory', selectedCategory);
                localStorage.setItem('selectedPrice', selectedPrice);
    
                for (let i = 0; i < items.length; i++) {
                    const item = items[i];
                    const itemCategory = item.getAttribute('data-category');
                    const itemPrice = parseFloat(item.getAttribute('data-price'));
    
                    let showItem = true;
    
                    // Filter by category
                    if (selectedCategory !== 'all' && itemCategory !== selectedCategory) {
                        showItem = false;
                    }
    
                    // Filter by price
                    switch (selectedPrice) {
                        case 'under1000':
                            if (itemPrice >= 1000) showItem = false;
                            break;
                        case 'under1500':
                            if (itemPrice >= 1500) showItem = false;
                            break;
                        case '1500to3000':
                            if (itemPrice < 1500 || itemPrice > 3000) showItem = false;
                            break;
                        case 'over3000':
                            if (itemPrice <= 3000) showItem = false;
                            break;
                    }
    
                    item.style.display = showItem ? 'block' : 'none';
                }
            }
    
            // Add event listeners for the filters
            categorySelect.addEventListener('change', filterProducts);
            priceSelect.addEventListener('change', filterProducts);
    
            // Initial filter on page load
            filterProducts();
    
            // Cart array
            let cart = [];
    
            // Function to update cart display
            function updateCart() {
                cartList.innerHTML = '';
                totalCost = 0;
    
                cart.forEach(item => {
                    const cartItem = document.createElement('div');
                    cartItem.className = 'card mb-2';
                    cartItem.innerHTML = `
                        <img src="${item.imgSrc}" class="card-img-top" alt="${item.title}">
                        <div class="card-body">
                            <h5 class="card-title">${item.title} (x${item.quantity})</h5>
                            <p class="card-text">Total Price: ${item.price * item.quantity} ₪</p>
                            <button class="btn btn-secondary increase">+1</button>
                            <button class="btn btn-secondary decrease">-1</button>
                            <button class="btn btn-danger remove">Remove</button>
                        </div>
                    `;
                    cartList.appendChild(cartItem);
                    totalCost += item.price * item.quantity;
    
                    // Add event listeners for increase, decrease, and remove buttons
                    cartItem.querySelector('.increase').addEventListener('click', function () {
                        item.quantity++;
                        updateCart();
                        localStorage.setItem('cartItems', JSON.stringify(cart));
                    });
    
                    cartItem.querySelector('.decrease').addEventListener('click', function () {
                        if (item.quantity > 1) {
                            item.quantity--;
                        } else {
                            cart = cart.filter(cartItem => cartItem.title !== item.title); // Remove item if quantity is 0
                        }
                        updateCart();
                        localStorage.setItem('cartItems', JSON.stringify(cart));
                    });
    
                    cartItem.querySelector('.remove').addEventListener('click', function () {
                        cart = cart.filter(cartItem => cartItem.title !== item.title); // Remove item from cart
                        updateCart();
                        localStorage.setItem('cartItems', JSON.stringify(cart));
                    });
                });
    
                cartTotal.innerText = `Cost of cart: ${totalCost} ₪`;
            }
    
            // Add event listener for "To Cart" buttons
            const addToCartButtons = document.querySelectorAll('.add-to-cart');
            addToCartButtons.forEach(button => {
                button.addEventListener('click', function () {
                    const card = button.closest('.card');
                    const productTitle = card.querySelector('.card-title').innerText;
                    const productPrice = parseFloat(card.getAttribute('data-price'));
                    const imgSrc = card.querySelector('img').src;
    
                    // Check if item already in cart
                    const existingItem = cart.find(item => item.title === productTitle);
                    if (existingItem) {
                        existingItem.quantity++;
                    } else {
                        cart.push({ title: productTitle, price: productPrice, quantity: 1, imgSrc });
                    }
    
                    // Update cart display
                    updateCart();
    
                    // Store cart items in local storage
                    localStorage.setItem('cartItems', JSON.stringify(cart));
                });
            });
    
            // Load cart items from local storage on page load
            const storedCartItems = JSON.parse(localStorage.getItem('cartItems')) || [];
            storedCartItems.forEach(item => {
                cart.push(item);
            });
            updateCart();
        });
    </script>
    
    
    <script>
            const themeToggleBtn = document.getElementById("themeToggleBtn");
            const body = document.body;
    
            // Set theme on page load
            const storedTheme = localStorage.getItem("theme");
            body.className = storedTheme ? storedTheme : 'light-theme'; // Default to light theme
    
            // Function to update form styles based on the current theme
            function updateFormStyles() {
                const form = document.getElementById("contactForm"); // Make sure your contact form has this ID
                if (body.classList.contains("dark-theme")) {
                    form.style.backgroundColor = "#333"; // Dark background for form
                    form.style.color = "#fff"; // Light text for form
                    // Update input styles for dark theme
                    const inputs = form.querySelectorAll("input, textarea");
                    inputs.forEach(input => {
                        input.style.backgroundColor = "#555"; // Darker input background
                        input.style.color = "#fff"; // Light input text
                    });
                } else {
                    form.style.backgroundColor = "#fff"; // Light background for form
                    form.style.color = "#000"; // Dark text for form
                    // Update input styles for light theme
                    const inputs = form.querySelectorAll("input, textarea");
                    inputs.forEach(input => {
                        input.style.backgroundColor = "#f8f9fa"; // Lighter input background
                        input.style.color = "#000"; // Dark input text
                    });
                }
            }
    
            // Theme toggle button click handler
            themeToggleBtn.addEventListener("click", function() {
                // Play notification sound
                const audio = document.getElementById("dayNight");
                if (audio) {
                    audio.play();
                }
                
                // Toggle between themes
                body.classList.toggle("dark-theme");
                body.classList.toggle("light-theme");
    
                // Save the selected theme to local storage
                const theme = body.classList.contains("dark-theme") ? "dark-theme" : "light-theme";
                localStorage.setItem("theme", theme);
    
                // Update form styles
                updateFormStyles();
    
                
            });
    
            // Update form styles initially
            updateFormStyles();
        
    </script>
    
    <script src="./scripts.js" type="text/javascript"></script>
</body>

</html>
